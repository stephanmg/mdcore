<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>mdcore: /Users/stephan/Code/git/mdcore/src/queue.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">mdcore
   &#160;<span id="projectnumber">0.1.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">queue.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;../config.h&quot;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;float.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;limits.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="cycle_8h_source.html">cycle.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="errs_8h_source.html">errs.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fptype_8h_source.html">fptype.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="lock_8h_source.html">lock.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="part_8h_source.html">part.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cell_8h_source.html">cell.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="task_8h_source.html">task.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="space_8h_source.html">space.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="potential_8h_source.html">potential.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="engine_8h_source.html">engine.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="queue_8h_source.html">queue.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7673862d447029edaf3172ebd94aa28e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a7673862d447029edaf3172ebd94aa28e">error</a>(<a class="el" href="errs_8c.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>)&#160;&#160;&#160;( <a class="el" href="queue_8h.html#a60f9ad73cef2758f4ceda86cd7a6d363">queue_err</a> = <a class="el" href="errs_8h.html#ae37a9c0e0a0aa4a92dbe64c0f38ed95c">errs_register</a>( <a class="el" href="errs_8c.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a> , <a class="el" href="queue_8c.html#ae8c658c87870aabe30f16874efc8bf44">queue_err_msg</a>[-(<a class="el" href="errs_8c.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>)] , __LINE__ , __FUNCTION__ , __FILE__ ) )</td></tr>
<tr class="separator:a7673862d447029edaf3172ebd94aa28e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2ca24623d81936be7c3ec68d79cc13cb"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structtask.html">task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a2ca24623d81936be7c3ec68d79cc13cb">queue_get</a> (struct <a class="el" href="structqueue.html">queue</a> *q, int rid, int keep)</td></tr>
<tr class="memdesc:a2ca24623d81936be7c3ec68d79cc13cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a task from the queue.  <a href="#a2ca24623d81936be7c3ec68d79cc13cb">More...</a><br/></td></tr>
<tr class="separator:a2ca24623d81936be7c3ec68d79cc13cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2e2c0a86a9c9ddc0a91a98bb11f9e7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#ab2e2c0a86a9c9ddc0a91a98bb11f9e7e">queue_reset</a> (struct <a class="el" href="structqueue.html">queue</a> *q)</td></tr>
<tr class="memdesc:ab2e2c0a86a9c9ddc0a91a98bb11f9e7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the queue.  <a href="#ab2e2c0a86a9c9ddc0a91a98bb11f9e7e">More...</a><br/></td></tr>
<tr class="separator:ab2e2c0a86a9c9ddc0a91a98bb11f9e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17b4e18dc071a842e66588f988de84e9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a17b4e18dc071a842e66588f988de84e9">queue_insert</a> (struct <a class="el" href="structqueue.html">queue</a> *q, struct <a class="el" href="structtask.html">task</a> *t)</td></tr>
<tr class="memdesc:a17b4e18dc071a842e66588f988de84e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an index to the given queue.  <a href="#a17b4e18dc071a842e66588f988de84e9">More...</a><br/></td></tr>
<tr class="separator:a17b4e18dc071a842e66588f988de84e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e73d5793860530201de4c30537990cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a9e73d5793860530201de4c30537990cc">queue_init</a> (struct <a class="el" href="structqueue.html">queue</a> *q, int size, struct <a class="el" href="structspace.html">space</a> *s, struct <a class="el" href="structtask.html">task</a> *tasks)</td></tr>
<tr class="memdesc:a9e73d5793860530201de4c30537990cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a task queue.  <a href="#a9e73d5793860530201de4c30537990cc">More...</a><br/></td></tr>
<tr class="separator:a9e73d5793860530201de4c30537990cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a60f9ad73cef2758f4ceda86cd7a6d363"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#a60f9ad73cef2758f4ceda86cd7a6d363">queue_err</a> = <a class="el" href="queue_8h.html#abe3d3632cd3a316ada5cd4ad638efb38">queue_err_ok</a></td></tr>
<tr class="separator:a60f9ad73cef2758f4ceda86cd7a6d363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2d167c146eecb51197bb473b656fafb"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#ac2d167c146eecb51197bb473b656fafb">queue_rcount</a> = 0</td></tr>
<tr class="separator:ac2d167c146eecb51197bb473b656fafb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8c658c87870aabe30f16874efc8bf44"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="queue_8c.html#ae8c658c87870aabe30f16874efc8bf44">queue_err_msg</a> [5]</td></tr>
<tr class="separator:ae8c658c87870aabe30f16874efc8bf44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a7673862d447029edaf3172ebd94aa28e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define error</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="errs_8c.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a></td><td>)</td>
          <td>&#160;&#160;&#160;( <a class="el" href="queue_8h.html#a60f9ad73cef2758f4ceda86cd7a6d363">queue_err</a> = <a class="el" href="errs_8h.html#ae37a9c0e0a0aa4a92dbe64c0f38ed95c">errs_register</a>( <a class="el" href="errs_8c.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a> , <a class="el" href="queue_8c.html#ae8c658c87870aabe30f16874efc8bf44">queue_err_msg</a>[-(<a class="el" href="errs_8c.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>)] , __LINE__ , __FUNCTION__ , __FILE__ ) )</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2ca24623d81936be7c3ec68d79cc13cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structtask.html">task</a>* queue_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqueue.html">queue</a> *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a task from the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The <a class="el" href="structqueue.html">queue</a>. </td></tr>
    <tr><td class="paramname">rid</td><td><a class="el" href="structrunner.html">runner</a> ID for ownership issues. </td></tr>
    <tr><td class="paramname">keep</td><td>If true, remove the returned index from the queue.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="structtask.html">task</a> with no unresolved dependencies or conflicts or <code>NULL</code> if none could be found. </dd></dl>

</div>
</div>
<a class="anchor" id="a9e73d5793860530201de4c30537990cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int queue_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqueue.html">queue</a> *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structspace.html">space</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtask.html">task</a> *&#160;</td>
          <td class="paramname"><em>tasks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a task queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The <a class="el" href="structqueue.html">queue</a> to initialize. </td></tr>
    <tr><td class="paramname">size</td><td>The maximum number of cellpairs in this queue. </td></tr>
    <tr><td class="paramname">s</td><td>The space with which this queue is associated. </td></tr>
    <tr><td class="paramname">tasks</td><td>An array containing the <a class="el" href="structtask.html">task</a> to which the queue indices will refer to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="queue_8h.html#abe3d3632cd3a316ada5cd4ad638efb38">queue_err_ok</a> or &lt;0 on error (see <a class="el" href="queue_8h.html#a60f9ad73cef2758f4ceda86cd7a6d363">queue_err</a>).</dd></dl>
<p>Initializes a queue of the maximum given size. The initial queue is empty and can be filled with pair ids.</p>
<dl class="section see"><dt>See Also</dt><dd>#queue_tuples_init </dd></dl>

</div>
</div>
<a class="anchor" id="a17b4e18dc071a842e66588f988de84e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int queue_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqueue.html">queue</a> *&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtask.html">task</a> *&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an index to the given queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The <a class="el" href="structqueue.html">queue</a>. </td></tr>
    <tr><td class="paramname">thing</td><td>The thing to be inserted.</td></tr>
  </table>
  </dd>
</dl>
<p>Inserts a task into the queue at the location of the next pointer and moves all remaining tasks up by one. Thus, if the queue is executing, the inserted task is considered to already have been taken.</p>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 if the queue is full and &lt;0 on error (see <a class="el" href="queue_8h.html#a60f9ad73cef2758f4ceda86cd7a6d363">queue_err</a>). </dd></dl>

</div>
</div>
<a class="anchor" id="ab2e2c0a86a9c9ddc0a91a98bb11f9e7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void queue_reset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structqueue.html">queue</a> *&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q</td><td>The <a class="el" href="structqueue.html">queue</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a60f9ad73cef2758f4ceda86cd7a6d363"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int queue_err = <a class="el" href="queue_8h.html#abe3d3632cd3a316ada5cd4ad638efb38">queue_err_ok</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The ID of the last error. </p>

</div>
</div>
<a class="anchor" id="ae8c658c87870aabe30f16874efc8bf44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* queue_err_msg[5]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">        <span class="stringliteral">&quot;Nothing bad happened.&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;An unexpected NULL pointer was encountered.&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;A call to malloc failed, probably due to insufficient memory.&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;Attempted to insert into a full queue.&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;An error occured in a lock function.&quot;</span></div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac2d167c146eecb51197bb473b656fafb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int queue_rcount = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 24 2014 21:22:39 for mdcore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
